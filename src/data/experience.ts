import { Experience } from "../types";

export const experience: Experience[] = [
  {
    id: "ninja-infosys-pm",
    title: "Project Manager & Tech Lead",
    company: "Ninja Infosys",
    location: "Kathmandu District, Nepal",
    type: "job",
    startDate: "2026-06",
    endDate: "",
    description:
      "Overseeing both project execution and technical leadership for Digital e-Palika, a digital governance platform now serving 50+ municipalities across Nepal. The platform streamlines local government services like citizen service delivery, revenue collection, and grievance handling.",
    responsibilities: [
      "Coordinate teams and manage timelines for Digital e-Palika platform",
      "Align stakeholders and ensure successful delivery of governance features",
      "Drive architectural decisions as Tech Lead",
      "Mentor engineers and ensure system is scalable, maintainable, and secure",
    ],
    technologies: [
      "Project Management",
      "Technology Integration",
      "R&D",
      "Digital Governance",
      "Team Leadership",
      "Architecture Design",
    ],
    achievements: [
      "Platform now serving 50+ municipalities across Nepal",
      "Successfully delivered citizen service delivery and revenue collection features",
    ],
  },
  {
    id: "isrc-fullstack",
    title: "Full Stack Engineer",
    company: "Intensive Study and Research Center",
    location: "Kathmandu, Bāgmatī, Nepal",
    type: "job",
    startDate: "2026-01",
    endDate: "2026-06",
    description:
      "Visionary technologist driving large-scale digital transformation to modernize governance and public services in Nepal. Architected and delivered secure, scalable platforms—such as Survey Management Systems and Digital Profile Delivery Systems—that form the foundation for smarter, data-informed municipal operations.",
    responsibilities: [
      "Architected and delivered Survey Management Systems and Digital Profile Delivery Systems",
      "Directed end-to-end DevOps pipelines (CI/CD, Dockerized deployment, AWS infrastructure)",
      "Led field training and capacity-building initiatives for 300+ local officials and enumerators",
      "Ensured resilient, efficient systems for diverse and resource-constrained regions",
    ],
    technologies: [
      "NestJS",
      "Next.js",
      "PostgreSQL",
      "MongoDB",
      "Docker",
      "Jenkins",
      "AWS",
      "EC2",
      "S3",
      "Nginx",
      "ODK Collect",
      "ODK Central",
      "Git",
      "PM2",
    ],
    achievements: [
      "Trained 300+ local officials and enumerators in digital skills",
      "Built secure, scalable platforms for modernizing governance",
      "Empowered communities for digital inclusion and sustainable development",
    ],
    companyUrl: "",
  },
  {
    id: "ibtidaa-fullstack",
    title: "Full Stack Developer",
    company: "Ibtidaa Softwares Pvt. Ltd.",
    location: "Nepal",
    type: "job",
    startDate: "2023-10",
    endDate: "2024-12",
    description:
      "Developed and maintained full-stack applications including 'Bidesh' App and Website for RP Srijan Way To Success using Next.js, and an Event Management and Visualization Tool using Django and JavaScript for Shramik Sanjal.",
    responsibilities: [
      "Developed and maintained 'Bidesh' App and Website using Next.js",
      "Built Event Management and Visualization Tool using Django and JavaScript",
      "Served as Tech Lead for development projects",
      "Implemented data visualization features using Chart.js",
    ],
    technologies: [
      "Next.js",
      "PostgreSQL",
      "NestJS",
      "Express.js",
      "MongoDB",
      "Jenkins",
      "Redux.js",
      "Node.js",
      "JavaScript",
      "React.js",
      "Django REST Framework",
      "Python",
      "Chart.js",
    ],
    achievements: [
      "Successfully delivered multiple full-stack applications",
      "Led technical development as Tech Lead",
    ],
  },
  {
    id: "ieee-chair",
    title: "Chair",
    company: "IEEE Pulchowk Student Branch",
    location: "Lalitpur District, Nepal",
    type: "internship",
    startDate: "2023-04",
    endDate: "2024-06",
    description:
      "Led IEEE Pulchowk Student Branch as Chair, organizing technical events, workshops, and coordinating student activities.",
    responsibilities: [
      "Led the IEEE Pulchowk Student Branch as Chair",
      "Organized technical events and workshops",
      "Coordinated student activities and initiatives",
      "Managed branch operations and member engagement",
    ],
    technologies: [
      "Leadership",
      "Event Management",
      "Team Coordination",
      "Technical Workshops",
    ],
    achievements: [
      "Successfully led the student branch for over a year",
      "Organized multiple technical events and workshops",
    ],
  },
  {
    id: "ieee-creative",
    title: "Creative Director",
    company: "IEEE Pulchowk Student Branch",
    location: "Pulchowk",
    type: "internship",
    startDate: "2023-03",
    endDate: "2024-05",
    description:
      "Served as Creative Director for IEEE Pulchowk Student Branch, managing creative content and visual communications for the branch.",
    responsibilities: [
      "Managed creative content for IEEE Pulchowk Student Branch",
      "Designed visual communications and promotional materials",
      "Coordinated creative initiatives and campaigns",
    ],
    technologies: [
      "Creative Design",
      "Visual Communications",
      "Content Management",
    ],
    achievements: [
      "Enhanced branch visibility through creative initiatives",
    ],
  },
  {
    id: "pulchowk-music",
    title: "Executive Committee Member",
    company: "Pulchowk Music Club And Research Center",
    location: "Pulchowk, Lalitpur, Nepal",
    type: "internship",
    startDate: "2022-05",
    endDate: "2023-07",
    description:
      "Served as Executive Committee Member at Pulchowk Music Club And Research Center, contributing to music-related activities and events.",
    responsibilities: [
      "Participated in executive committee decisions",
      "Organized music events and activities",
      "Contributed to club operations and management",
    ],
    technologies: [
      "Music",
      "Event Organization",
      "Committee Management",
    ],
    achievements: [],
  },
  {
    id: "pointzeroo-frontend",
    title: "Frontend Developer",
    company: "PointZeroo",
    location: "Nepal",
    type: "job",
    startDate: "2022-03",
    endDate: "2022-09",
    description:
      "Maintained an e-commerce website and developed a web application for SSoChe, Pulchowk Campus, focusing on frontend development with modern web technologies.",
    responsibilities: [
      "Maintained an e-commerce website",
      "Developed a web application for SSoChe, Pulchowk Campus",
      "Implemented frontend features using HTML5, CSS, and JavaScript",
      "Worked with SQL databases for data management",
    ],
    technologies: [
      "JavaScript",
      "HTML5",
      "CSS",
      "SQL",
      "Front-End Development",
    ],
    achievements: [
      "Successfully maintained and enhanced e-commerce platform",
      "Delivered web application for educational institution",
    ],
  },
  {
    id: "ryc-global-officer",
    title: "Officer",
    company: "RYC Global",
    location: "",
    type: "job",
    startDate: "2020-03",
    endDate: "2022-08",
    description:
      "Served as an Officer at RYC Global, contributing to organizational operations and initiatives.",
    responsibilities: [
      "Managed organizational operations",
      "Coordinated with team members on various initiatives",
      "Contributed to organizational growth and development",
    ],
    technologies: [
      "Operations Management",
      "Team Coordination",
    ],
    achievements: [],
  },
];

// Helper functions
export const getCurrentExperience = (): Experience[] => {
  return experience.filter(
    (exp) => !exp.endDate || new Date(exp.endDate) > new Date()
  );
};

export const getResearchExperience = (): Experience[] => {
  return experience.filter((exp) => exp.type === "research");
};

export const getExperienceById = (id: string): Experience | undefined => {
  return experience.find((exp) => exp.id === id);
};

export const getExperienceDuration = (exp: Experience): string => {
  const start = new Date(exp.startDate);
  const end = exp.endDate ? new Date(exp.endDate) : new Date();

  const diffTime = Math.abs(end.getTime() - start.getTime());
  const diffMonths = Math.floor(diffTime / (1000 * 60 * 60 * 24 * 30));

  if (diffMonths < 1) {
    return "< 1 month";
  } else if (diffMonths < 12) {
    return `${diffMonths} month${diffMonths > 1 ? "s" : ""}`;
  } else {
    const years = Math.floor(diffMonths / 12);
    const remainingMonths = diffMonths % 12;
    if (remainingMonths === 0) {
      return `${years} year${years > 1 ? "s" : ""}`;
    } else {
      return `${years} yr${years > 1 ? "s" : ""} ${remainingMonths} mo`;
    }
  }
};

export const getTotalResearchMonths = (): number => {
  return getResearchExperience().reduce((total, exp) => {
    const start = new Date(exp.startDate);
    const end = exp.endDate ? new Date(exp.endDate) : new Date();
    const diffTime = Math.abs(end.getTime() - start.getTime());
    const diffMonths = Math.floor(diffTime / (1000 * 60 * 60 * 24 * 30));
    return total + diffMonths;
  }, 0);
};

export const getExperienceStats = () => {
  const total = experience.length;
  const research = getResearchExperience().length;
  const current = getCurrentExperience().length;
  const totalResearchMonths = getTotalResearchMonths();

  return {
    total,
    research,
    current,
    totalResearchMonths,
    internationalCollaborations: 2, // Duke + Spain
  };
};